{
 "properties": {
  "displayName": "Deploy-Diag-LogAnalytics",
  "policyType": "Custom",
  "description": "This initiative configures application Azure resources to forward diagnostic logs and metrics to an Azure Log Analytics workspace.",
  "metadata": {
   "createdBy": "6cb45b02-331f-4847-b920-7a03f63055e9",
   "createdOn": "2020-10-19T13:54:46.4242979Z",
   "updatedBy": "6cb45b02-331f-4847-b920-7a03f63055e9",
   "updatedOn": "2020-10-19T14:08:00.2475058Z"
  },
  "parameters": {
   "logAnalytics": {
    "type": "String",
    "metadata": {
     "displayName": "Log Analytics workspace",
     "description": "Select the Log Analytics workspace from dropdown list",
     "strongType": "omsWorkspace"
    }
   }
  },
  "policyDefinitions": [
   {
    "policyDefinitionReferenceId": "12528778696514102021",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NIC",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "13929755833738355511",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AA",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "5699257926468017044",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PublicIP",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "6520098144632779168",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LoadBalancer",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "4756714891571624264",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-NetworkSecurityGroups",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "1420927345051507415",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-KeyVault",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "3690315365935242158",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CognitiveServices",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "13930362187783659785",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DLAnalytics",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "7765010648084314155",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataLakeStore",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "15659039774532406642",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventHub",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "10839016721536679138",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-iotHub",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "11440144771302041328",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsWF",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "11318144630120782812",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-LogicAppsISE",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "4028455767190386284",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RecoveryVault",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "963100109149673604",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SearchServices",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "9910254685227880525",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ServiceBus",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "5959777948640011790",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLDBs",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "3220510138980405818",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLElasticPools",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "1082888254620261859",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-APIMgmt",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "16352529776746794136",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ApplicationGateway",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "5141518194873579965",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Batch",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "4544971342631218981",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MySQL",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "13557667719458753320",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PostgreSQL",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "7742330705902297505",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CDNEndpoints",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "12332530297864597191",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-CosmosDB",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "13666613668803646633",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-DataFactory",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "17901756351007391151",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Firewall",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "18079185888388856565",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-PowerBIEmbedded",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "9344847491592563192",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-StreamAnalytics",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "13012316079091994465",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ExpressRoute",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "12553296732710438289",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACI",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "14336561057293885344",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-ACR",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "7731830450299379335",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VirtualNetwork",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "5412814642641854555",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VM",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "2071506337451240154",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VMSS",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "3909331863594551031",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-VNetGW",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "1293805276511075095",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AKS",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "12021362939595801243",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Website",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "6804981980490601949",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-AnalysisService",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "3508298431331660801",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridTopic",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "8467066225544940332",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-EventGridSub",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "196081808246550323",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-HDInsight",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "18407336793791145846",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-RedisCache",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "6171475551131688414",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-Relay",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "11762521926302480827",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SignalR",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "14117153536301904388",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TrafficManager",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "12330073058683813256",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-WebServerFarm",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "14248793675835632561",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-SQLMI",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "15602652438450333892",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-TimeSeriesInsights",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   },
   {
    "policyDefinitionReferenceId": "11677782873484253523",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policyDefinitions/Deploy-Diagnostics-MlWorkspace",
    "parameters": {
     "logAnalytics": {
      "value": "[parameters('logAnalytics')]"
     }
    }
   }
  ]
 },
 "id": "/providers/Microsoft.Management/managementGroups/sntes/providers/Microsoft.Authorization/policySetDefinitions/Deploy-Diag-LogAnalytics",
 "type": "Microsoft.Authorization/policySetDefinitions",
 "name": "Deploy-Diag-LogAnalytics"
}